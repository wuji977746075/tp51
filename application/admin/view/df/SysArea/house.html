{extend name="df/tpl/base_index" /}

{block name="area_body"}
<div class="layui-card">
  <div class="layui-card-header">{$cfg.business}{:L('manage')}</div>
  <div class="layui-card-body">
    {:html_head_tip($cfg['business'].'数据,点击 .单元格编辑')}
<table id="demo" lay-filter="fDemo"></table>
  </div>
</div>
<script type="text/html" id="barDemo">
  <div class="layui-btn-group">
    <a href="{:url('sysArea/house',[],'')}?code={{ d.code }}" class="layui-btn layui-btn-sm layer-msg ajax-post hide-data" hide-data="true" title="进入管理">管理此城</a>
  </div>
</script>
{/block}

{block name="area_foot"}
<!-- script -->
<script>
// page init
layui.use(['rb','table2','form'], function() {
  var layer = layui.layer
  ,table = layui.table2
  ,form = layui.form
  ,rb = layui.rb
  ,$ = layui.$;

  // form init
  // table init
  // table render
  rb.table = table.render($.extend(rb.table_config, {
    // url: '{:url(CONTROLLER_NAME."/ajax")}'
    // ,where:rb.where
    toolbar:false
    ,data : [
    {volist name="list" id="v"}
    {
      code:'{$v.code}',
      city:'{$v.city}'
    },
    {/volist}
    ]
    ,cols:  [[
      {field: 'city', title: '开放城市' }
      ,{field: 'code', title: '城市编码' }
      ,{align:'left',width:145,title: '操作',toolbar: '#barDemo'}
    ]]
  }));
  // {include file="df/tpl/index_extra"}
});
</script>
<!-- tpl -->
{/block}